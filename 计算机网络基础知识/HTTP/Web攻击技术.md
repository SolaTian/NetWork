# 11、`Web`的攻击技术

## 11.1、针对`Web`的攻击技术

针对`Web`应用的攻击模式分为主动攻击和被动攻击。

**<font size =4 color = red>`以服务器为目标的主动攻击`</font>**

> 以服务器为目标的主动攻击:指攻击者通过直接访问`Web`应用，把攻击代码传入的攻击模式。
  
由于该模式是直接针对服务器上的资源进行攻击，因此攻击者需要能够访问到那些资源。具有代表性攻击的是`SQL`攻击和`OS`命令注入攻击。

**<font size =4 color = red>`以服务器为目标的被动攻击`</font>**

> 以服务器为目标的被动攻击，指利用圈套策略执行攻击代码的攻击模式。

在被动攻击过程中，攻击者不直接对目标`Web`应用访问发起攻击。具有代表性的攻击是`跨站脚本攻击`和`跨站点请求伪造`。主要攻击用户的资源和权限，在`Web`页面或邮件内设置陷阱。

攻击模式如下：
1. 攻击者诱使用户触发已设置好的陷阱，陷阱启动已嵌入攻击代码的`HTTP`请求
2. 用户浏览器或邮件触发陷阱
3. 发送含有攻击代码的`HTTP`请求给作为攻击目标的`Web`应用，运行攻击代码
4. 执行攻击代码，可能导致用户所持有的`Cookie`等信息被窃取，登录状态的用户权限遭到恶意滥用。

利用被动攻击，可以发起对原本在互联网上无法直接访问的企业内网的攻击，窃取企业内部数据库等。

## 11.2、因输出值转义不完全引发的安全漏洞

针对`Web`应用的安全对策可以分为以下两部分
1. 客户端的验证
2. `Web`应用端（服务器端）的验证
   1. 输入值验证
   2. 输出值转义

**<font size =4 color = red>跨站脚本攻击（`XSS`）</font>**

> 跨站脚本攻击：指通过存在安全漏洞的`Web`网站注册用户的浏览器内运行非法的`HTML`标签或`JavaScript`进行的一种攻，属于被动攻击模式。

可能会造成以下影响：
- 利用虚假输入表单骗取用户个人信息；
- 利用脚本获取用户的`Cookie`值，被害者在不知情的情况下，帮助攻击者发送恶意请求；
- 显示伪造的文章或图片。

**<font size =4 color = red>`SQL`注入攻击</font>**

> `SQL注入`：是指针对`Web`应用使用的数据库，通过运行非法的`SQL`而产生的攻击。

`SQL`是用来操作关系型数据库管理系统的数据库语言，可进行操作数据或者定义数据等。关系型数据库有`Oracle Database`，`Microsoft SQL Server`，`IBM DB2`，`MySQL`和`PostgreSQL`等，这些都可以把`SQL`当做数据库语言使用。

`SQL注入`是攻击者将`SQL`语句改编成开发者意想不到的形式以达到破坏结构的攻击。


**<font size =4 color = red>`OS`命令注入攻击</font>**

> `OS`命令注入攻击：指通过`Web`应用，执行非法的操作系统命令达到攻击的目的。只要在能调用shell函数的地方就有被攻击的风险。


`OS`命令注入攻击可以向`shell`发送命令，让`Windows`或`Linux`的命令行启动程序，通过`OS`注入攻击可以执行`OS`上安装的各种程序。

**<font size =4 color = red>`HTTP`首部注入攻击</font>**

> `HTTP`首部注入攻击：指攻击者在响应首部字段内增加换行，添加任意响应首部或主体的一种攻击。属于被动攻击模式。


**<font size =4 color = red>邮件首部注入攻击</font>**

> 邮件首部注入攻击：指`Web`应用中的邮件发送功能，攻击者通过向邮件首部`To`或`subject`内任意添加非法内容发起的攻击。利用存在安全漏洞的Web网站，可以对任意邮件地址发送广告邮件或者病毒邮件。


**<font size =4 color = red>目录遍历攻击</font>**

> 目录遍历攻击：指对本无意公开的文件目录，通过非法阶段其目录路径之后，达成访问目的的一种攻击。也被称为路径遍历攻击。


**<font size =4 color = red>远程文件包含漏洞</font>**

>远程文件包含漏洞：指当部分脚本内容需要从其他文件读入时，攻击者利用指定外部服务器的`URL`充当依赖文件，让脚本读取之后，就可以运行任意脚本的攻击。


## 11.3、因设置或设计上的缺陷引发的安全漏洞

**<font size =4 color = red>强制浏览安全漏洞</font>**

> 指从安置在`Web`服务器的公开目录下的文件中，浏览那些原本非自愿公开的文件。

**<font size =4 color = red>不正确的错误消息处理安全漏洞</font>**

> 指`Web`应用中的错误信息内包含对于攻击者有用的信息。


**<font size =4 color = red>开放重定向</font>**

> 对指定的任意`URL`作重定向跳转的功能。如果指定的重定向`URL`到某个具有恶意的`Web`网站，用户就会被诱导至`Web`网站。


## 11.4 因会话管理疏忽引发的安全漏洞

会话管理是用来管理用户状态的必备功能。

**<font size =4 color = red>会话劫持</font>**

> 会话劫持：攻击者通过某种手段拿到了用户的会话`ID`，并非法使用此会话`ID`伪装成用户，达到攻击的目的。


**<font size =4 color = red>会话固定攻击</font>**

> 会话固定攻击：强制用户使用攻击者指定的会话`ID`，属于被动攻击。


**<font size =4 color = red>跨站点请求伪造</font>**

> 跨站点请求伪造：攻击者通过设置好的陷阱，强制对已完成认证的用户进行非预期的个人信息或设定信息等某些状态更新。属于被动攻击。

## 11.5、其他安全漏洞


**<font size =4 color = red>密码破解</font>**

> 算出密码，突破认证。包括穷举法，字典攻击(利用实现收集好的候选密码，然后去枚举)


`Web`在保存密码的时候，不会保存明文，而是通过散列函数作散列处理或者加`salt`的方式对要保存的密码进行加密。

对已经加密的密码的破解：通过穷举或字典攻击，针对密码使用相同的散列函数加密，将计算出来的散列值与目标散列值匹配，类推出密码。

`彩虹表`：由明文密码及与其对应的散列值构成的一张数据库表。在彩虹表里面搜散列值就可以找到对应的明文密码。


**<font size =4 color = red>点击劫持</font>**

> 指利用透明的按钮或者链接做成陷阱，覆盖在`Web`页面上，诱使用户在不知情的情况下，点击那个链接访问内容的一种攻击手段。


**<font size =4 color = red>`Dos`攻击</font>**

> 一种让运行的服务呈现停止状态的攻击。


**<font size =4 color = red>后门程序</font>**

> 指开发设置的隐藏入口，不按照正常步骤使用受限功能。
