# 5、`Web`服务器

## 5.1、使用单台虚拟主机实现多个域名

`HTTP/1.1`允许一台`HTTP服务器`搭建多个`Web站点`。比如`Web托管服务`，可以用一台服务器为多位客户服务，也可以以每位客户持有的域名运行各自不同的网站。这就是虚拟主机的功能。

即使物理层面只有一台服务器，只要使用虚拟主机的功能，可以假想为多台服务器。

同一台服务器的若包含了多个域名，这些域名在解析的时候会是相同的`IP地址`，因此需要在发送`HTTP`请求时，在`Host`首部完整指明主机名和域名的`URI`。

## 5.2、通信数据转发程序：代理，网关，隧道

**<font size =4 color = red>代理服务器</font>**

> 代理：一种具有转发功能的应用程序，接收客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。

> 代理服务器：接收客户端发送的请求后转发给其他服务器，代理不改变请求的`URI`，会直接发送给前方持有资源的目标服务器，从目标服务器返回的响应也会经代理服务器传给客户端。

代理服务器的应用：
- 通过设置组织内部的代理服务器可以做到针对特定`URI`访问的控制。
- 利用缓存技术减少网络带宽的流量。

代理按照两种基准分类：
1. 是否使用缓存，
2. 是否会修改报文。

> 缓存代理：可以预先将资源的副本缓存到代理服务器上，再次接收相同资源的请求时，无需从服务器那里获取资源，直接从缓存获取资源。缓存是有期限的，超时失效了需要缓存代理重新从服务器上获取新的资源。


> 透明代理：转发过程中不对报文做任何加工的代理类型。

**<font size =4 color = red>网关</font>**

> 网关：转发其他服务器通信数据的服务器，接收来自于客户端的请求时，它就像自己拥有资源的源服务器一样，对请求进行处理。

利用网关可以将客户端的`HTTP请求`转化成为`非HTTP通信`发给`非HTTP服务器`。

**<font size =4 color = red>隧道</font>**

> 隧道：在相隔甚远的客户端和服务器两者进行中转，并保持双方通信连接的应用程序。

隧道的目的是为了确保客户端能够与服务器安全的进行通信，本身不会去解析`HTTP请求`，会在双方断开连接时结束，客户端无需再以隧道的存在。


## 5.3、保存资源的缓存

> 缓存：指代理服务器或者客户端本地磁盘内保存的资源副本。

缓存的作用：可以减少对源（目标）服务器的访问，节省了通信流量和时间。

缓存的有效期：
1. 源服务器上的资源更新，缓存失效；
2. 客户端的要求，确认资源是否有效，会向源服务器确认。


客户端浏览器也可以缓存，称为临时网络文件，也有期限，浏览器缓存如果有效，可以直接从本地磁盘内读取。